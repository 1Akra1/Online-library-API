# üìö Online Library Management System (Backend)

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Å–µ—Ä–≤–µ—Ä–Ω—É—é —á–∞—Å—Ç—å (REST API) –¥–ª—è —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–Ω–ª–∞–π–Ω-–±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –∫–∞—Ç–∞–ª–æ–≥–æ–º –∫–Ω–∏–≥, –∞–≤—Ç–æ—Ä–∞–º–∏ –∏ –∂–∞–Ω—Ä–∞–º–∏, –∞ —Ç–∞–∫–∂–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Å–ø–∏—Å–∫–∏ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ.

---

## üåü –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

* **–ö–∞—Ç–∞–ª–æ–≥ –∫–Ω–∏–≥:** –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–ª–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ –∫–Ω–∏–≥ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± –∞–≤—Ç–æ—Ä–∞—Ö –∏ –∂–∞–Ω—Ä–∞—Ö.
* **–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:** –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–æ–ª–µ–π (`ADMIN`, `CLIENT`).
* **–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–µ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ:** –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –∫–Ω–∏–≥–∏ –≤ —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å –∏ —É–¥–∞–ª—è—Ç—å –∏—Ö.
* **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –∫–Ω–∏–≥ –¥–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –ø—Ä–∞–≤–∞–º–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.
* **–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö:** –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ –æ –≤—Å–µ—Ö –∫–Ω–∏–≥–∞—Ö –≤ —Ñ–æ—Ä–º–∞—Ç–µ CSV (—Ç–æ–ª—å–∫–æ –¥–ª—è `ADMIN`).
* **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (IDOR Protection):** –ü—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å —á—É–∂–∏–µ —Å–ø–∏—Å–∫–∏ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ.

---

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

* **–Ø–∑—ã–∫:** Java 17
* **–§—Ä–µ–π–º–≤–æ—Ä–∫:** Spring Boot 3.x (Web, Data JPA, Security)
* **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** MySQL 8.0
* **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** Spring Security (Basic Auth, NoOpPasswordEncoder –¥–ª—è —Ç–µ—Å—Ç–æ–≤)
* **–£—Ç–∏–ª–∏—Ç—ã:** Lombok (—Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ –∫–æ–¥–∞), OpenCSV (—ç–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö)

---

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–í –ø—Ä–æ–µ–∫—Ç–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–º–∏ —Å–≤—è–∑—è–º–∏. –û—Å–Ω–æ–≤–Ω—ã–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è ‚Äî **–ú–Ω–æ–≥–∏–µ-–∫–æ-–º–Ω–æ–≥–∏–º (ManyToMany)**:
* `books` ‚Üî `authors` (—á–µ—Ä–µ–∑ `book_authors`)
* `books` ‚Üî `genres` (—á–µ—Ä–µ–∑ `book_genres`)
* `users` ‚Üî `books` (—á–µ—Ä–µ–∑ `user_favorites`)



---

## üîë –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã API

### –ü—É–±–ª–∏—á–Ω—ã–µ (–¥–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ–º)
| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
| :--- | :--- | :--- |
| `GET` | `/api/books` | –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–Ω–∏–≥ |
| `POST` | `/api/register` | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ |
| `POST` | `/api/login` | –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É |

### –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç (CLIENT / ADMIN)
| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
| :--- | :--- | :--- |
| `POST` | `/api/users/{uId}/favorites/{bId}` | –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–∏–≥—É –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ |
| `DELETE` | `/api/users/{uId}/favorites/{bId}` | –£–¥–∞–ª–∏—Ç—å –∫–Ω–∏–≥—É –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ |

### –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (–¢–æ–ª—å–∫–æ ADMIN)
| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
| :--- | :--- | :--- |
| `POST` | `/api/books` | –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∫–Ω–∏–≥—É |
| `DELETE` | `/api/books/{id}` | –£–¥–∞–ª–∏—Ç—å –∫–Ω–∏–≥—É –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ |
| `GET` | `/api/books/export` | –°–∫–∞—á–∞—Ç—å —Å–ø–∏—Å–æ–∫ –∫–Ω–∏–≥ –≤ CSV |

---

## üõ° –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∑–∞—â–∏—Ç–∞ –¥–∞–Ω–Ω—ã—Ö

–ü—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑—É–µ—Ç –∑–∞—â–∏—Ç—É –æ—Ç **IDOR (Insecure Direct Object Reference)**. –ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –∏–∑–±—Ä–∞–Ω–Ω—ã–º —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –∑–∞–ª–æ–≥–∏–Ω–µ–Ω –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –Ω–æ –∏ —Å–æ–ø–æ—Å—Ç–∞–≤–ª—è–µ—Ç –µ–≥–æ `id` –∏–∑ –±–∞–∑—ã —Å `id`, –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–º –≤ –∑–∞–ø—Ä–æ—Å–µ:

```java
// –ü—Ä–∏–º–µ—Ä –ª–æ–≥–∏–∫–∏ –∏–∑ LibraryController
User currentUser = userRepository.findByEmail(principal.getName()).orElseThrow();
if (!currentUser.getId().equals(userId)) {
    return ResponseEntity.status(403).body("–î–æ—Å—Ç—É–ø –∫ —á—É–∂–∏–º –¥–∞–Ω–Ω—ã–º –∑–∞–ø—Ä–µ—â–µ–Ω!");
}
```
## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫
–ù–∞—Å—Ç—Ä–æ–π–∫–∞ MySQL:
–°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö online_library –ø–æ —Ç–∞–∫–æ–º—É –ø—Ä–∏–º–µ—Ä—É.
<img width="814" height="342" alt="image" src="https://github.com/user-attachments/assets/a49c9b65-b140-44cf-808b-6163abfaa29c" />
–í —Ñ–∞–π–ª–µ src/main/resources/application.properties —É–∫–∞–∂–∏—Ç–µ –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç—É–ø–∞:

```java
spring.datasource.url=jdbc:mysql://localhost:3306/online_library
spring.datasource.username=–í–ê–®_–õ–û–ì–ò–ù
spring.datasource.password=–í–ê–®_–ü–ê–†–û–õ–¨
```
–°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞:

```Bash
mvn clean install
```
–ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

```Bash
mvn spring-boot:run
```
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –∑–∞–ø—É—â–µ–Ω–æ –Ω–∞ http://localhost:8080.

## üìä –î–∏–∞–≥—Ä–∞–º–º–∞ –∫–ª–∞—Å—Å–æ–≤ (UML)
–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –ø–æ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–π –º–Ω–æ–≥–æ—Å–ª–æ–π–Ω–æ–π —Å—Ö–µ–º–µ: Controller ‚Üí Service ‚Üí Repository ‚Üí Entity.
<img width="1711" height="972" alt="image" src="https://github.com/user-attachments/assets/9a15f8f2-1a21-415d-a10e-0a5d744582b6" />
